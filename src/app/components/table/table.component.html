<table mat-table matSort [dataSource]="dataSource">

  <ng-container *ngFor="let col of columns" [matColumnDef]="col.name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ col.name }}</th>
    <td mat-cell *matCellDef="let row">
      <ng-container [ngTemplateOutlet]="col.cellTemplate" [ngTemplateOutletContext]="{ value: row[col.prop] }"></ng-container>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">No data to diplay</td>
  </tr>

</table>

<ng-template #coordinates let-value="value">
  {{ value.latitude }}, {{ value.longitude }}
</ng-template>

<ng-template #temperature let-value="value">
  {{ value | temperature }}
</ng-template>

<ng-template #text let-value="value">
  {{ value }}
</ng-template>