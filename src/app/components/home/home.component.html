<form [formGroup]='form' class="home__search-form">
    <mat-form-field [floatLabel]="'never'">
        <mat-icon [inline]="true" matPrefix>search</mat-icon>
        <input type="text" placeholder="search location" matInput formControlName="LocalizedName"
            [matAutocomplete]="auto">
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" (optionSelected)="onSelectionChange($event)"
            [displayWith]="displayFn">
            <mat-option *ngFor="let option of filteredOptions$ | async" [value]="option">
                {{option.LocalizedName}}
            </mat-option>
        </mat-autocomplete>
        <mat-error>Invalid Input</mat-error>
    </mat-form-field>
</form>
<mat-card class="home__card">
    <h1 *ngIf="!currentConditions; else contentAvailable">Unavailable</h1>
    <ng-template #contentAvailable>
        <mat-card-title class="home__title">
            <span>
                <span>{{selectedOption.LocalizedName}}</span>
                <span>{{currentConditions.Temperature.Metric.Value}}&#176;C</span>
            </span>
            <button mat-flat-button favoritesToggle [color]="'primary'" (click)="toggleFavorites()"></button>
        </mat-card-title>
        <mat-card-content class="home__content">
            <h1 class="home__content-header">{{currentConditions.WeatherText}}</h1>
            <div class="home__forecasts">
                <app-forecast *ngFor="let forecast of forecasts" [forecast]="forecast"></app-forecast>
            </div>
        </mat-card-content>
    </ng-template>
</mat-card>