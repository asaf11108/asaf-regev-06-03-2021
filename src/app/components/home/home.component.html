<form [formGroup]='form' class="home__search-form">
    <mat-form-field [floatLabel]="'never'">
        <mat-icon [inline]="true" matPrefix>search</mat-icon>
        <input type="text" placeholder="search location" matInput formControlName="LocalizedName"
            [matAutocomplete]="auto">
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" (optionSelected)="onSelectionChange($event)"
            [displayWith]="displayFn">
            <mat-option *ngFor="let option of filteredOptions$ | async" [value]="option">
                {{option.LocalizedName}}
            </mat-option>
        </mat-autocomplete>
        <mat-error>Invalid Input</mat-error>
    </mat-form-field>
</form>
<mat-card class="home__card">
    <ng-container *ngIf="favoriteLocation$ | async as favoriteLocation">
        <h1 *ngIf="!favoriteLocation; else contentAvailable" class="home__unavailable">Unavailable</h1>
        <ng-template #contentAvailable>
            <mat-card-title class="home__title">
                <span>
                    <span>{{favoriteLocation.title}}</span>
                    <span>{{favoriteLocation.temperature}}&#176;C</span>
                </span>
                <button mat-flat-button [favoritesToggle]="isFavorite$ | async" [color]="'primary'"
                    (addFavorites)="addToFavorites()" (removeFavorites)="removeFromFavorites()"></button>
            </mat-card-title>
            <mat-card-content class="home__content">
                <h1 class="home__content-header">{{favoriteLocation.weatherText}}</h1>
                <div class="home__forecasts">
                    <app-forecast *ngFor="let forecast of favoriteLocation.forecasts" [forecastData]="forecast"></app-forecast>
                </div>
            </mat-card-content>
        </ng-template>
    </ng-container>
</mat-card>